<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Concluded</title>

    <meta name="title" content="Collaborative Narratives">
    <meta name="description" content="Our project emphasizes limitless creativity, blurring the lines between final output and ongoing
        evolution, and promoting holistic growth guided by principles of communication, documentation, humility,
        action, reflection, environmental consciousness, and global collaboration.">
    <meta name="author" content="Pablo Moreno">
    <link rel="canonical" href="https://collaborative-narratives.online/">

    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="assets/favicon/site.webmanifest">
    <link rel="mask-icon" href="assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="assets/css/normalize.css">
    <link rel="stylesheet" href="assets/css/global.css">

    <style>
        .concluded img {
            max-width: 90%;
            width: 300px;
        }

        .concluded {
            height: 100vh;
            width: 100vw;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            z-index: 99;
        }


        .video {}


        .show {
            display: flex;
            flex-direction: column;
            margin: auto;
            gap: var(--spacing-l);
            align-items: center;
            justify-content: center;
            align-content: center;
        }

        .show>div {
            position: sticky;
            top: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        h4 {
            position: absolute;
            font-family: 'InstrumentalRegular';
            bottom: 0;
            margin: 0;
            left: 0;
            width: 100%;
            padding: var(--spacing-m);
            background-color: #00000091;
            color: var(--color-secondary);
            background: linear-gradient(1deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0) 100%);
        }

        .block {
            position: relative;
        }

        .frame {
            height: 50vh;
            display: flex;
            flex-direction: column;
            width: auto;
            aspect-ratio: 3/4;
            overflow: hidden;
            border-radius: 20px;
            box-shadow: 0px 0px 10px 0px var(--color-primary);
            background-color: var(--color-secondary);
            position: relative;
        }

        .block a {
            position: absolute;
            top: -15px;
            right: -15px;
            background-color: var(--color-primary);
            color: var(--color-secondary);
            height: fit-content;
            width: fit-content;
            border-radius: 99px;
            padding: 8px 12px;
            display: flex;
            align-items: center;
            z-index: 99;
        }

        .show img,
        .gallery img {
            height: 100%;
            width: 100%;
            object-fit: cover;
        }


        /* the full-viewport wrapper */
        #video-container {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: black;
            position: sticky;
            top: 0;
        }

        /* center & scale the iframe to always cover */
        #video-container iframe {
            position: absolute;
            top: 50%;
            left: 50%;
            /* these two lines make sure it always at least fills one dimension */
            min-width: 100vw;
            min-height: 100vh;
            /* center it and crop the excess */
            transform: translate(-50%, -50%);
        }



        .gallery {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-m);
            padding: var(--spacing-m) var(--spacing-m) calc(var(--spacing-m)*5) var(--spacing-m);
            max-width: 970px;
            margin: auto;
        }

        .gallery img {
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        /* when active, make it cover the viewport */
        .cover-fullscreen {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            object-fit: contain !important;
            z-index: 9999 !important;
            cursor: zoom-out !important;
            transform: none !important;
            background-color: #000000de;
            backdrop-filter: blur(20px);
        }
    </style>
</head>

<body>

    <nav>
        <button><a
               href="#collection">COLLECTION</a></button>
        <button><a
               href="https://concluded.bigcartel.com/products">SHOP</a></button>
        <button><a
               href="process.html">PROCESS</a></button>

    </nav>

    <div style="height: 200vh;">
        <div class="concluded">
            <img src="logo.webp" alt="">
        </div>

        <div id="video-container">
            <iframe
                    src="https://player.vimeo.com/video/678345388?background=1&autoplay=1&loop=1&muted=1"
                    frameborder="0"
                    allow="autoplay; fullscreen; picture-in-picture; encrypted-media"
                    allowfullscreen
                    webkitallowfullscreen
                    mozallowfullscreen
                    title="Tribut au cafÃ© (2021)"></iframe>
        </div>
    </div>

    <div class="show" id="collection"></div>

    <div class="gallery"></div>


    <script>

        fetch(
            "https://opensheet.elk.sh/1IFYgWa27f1VhCskcDEsuCo40eLTc1djdonULdSEGX6Q/MAIN")
            .then((res) => res.json())
            .then((data) => {
                data.forEach((row) => {
                    let container = document.createElement("div");
                    document.querySelector(".show").appendChild(container);

                    let block = document.createElement("div");
                    block.className = 'block'
                    container.appendChild(block);

                    let buy = document.createElement("a");
                    buy.href = row.Link
                    buy.innerHTML = 'Buy'
                    block.appendChild(buy);


                    let frame = document.createElement("div");
                    frame.className = 'frame'
                    block.appendChild(frame);

                    let title = document.createElement("h4");
                    title.innerHTML = row.Title;
                    frame.appendChild(title);

                    let image = document.createElement("img");
                    image.src = convertToImageLink(row.Source);
                    frame.appendChild(image);


                });
            });

        fetch("https://opensheet.elk.sh/1IFYgWa27f1VhCskcDEsuCo40eLTc1djdonULdSEGX6Q/GALLERY")
            .then(res => res.json())
            .then(data => {
                const gallery = document.querySelector(".gallery");
                data.forEach(row => {
                    const img = document.createElement("img");
                    img.src = convertToImageLink(row.Source);
                    // toggle cover mode on click/touch
                    img.addEventListener("click", () => {
                        img.classList.toggle("cover-fullscreen");
                    });
                    gallery.appendChild(img);
                });
            });



        function convertToImageLink(link) {
            const match = link.match(/\/d\/([^\/]+)\//);
            if (match && match[1]) {
                const fileId = match[1];
                return `https://lh3.googleusercontent.com/d/${fileId}`;
            } else {
                return "Invalid Google Drive link";
            }
        }


    </script>
</body>

</html>